<div class="change-password-container">
  <div class="change-password-card">
    <h2>Change Password</h2>

    <form (ngSubmit)="onSubmit()" #changePasswordForm="ngForm">
      <div class="form-group">
        <label for="currentPassword">Current Password:</label>
        <input
          type="password"
          id="currentPassword"
          name="currentPassword"
          [(ngModel)]="currentPassword"
          required
          class="form-control"
          #currentPasswordInput="ngModel"
        />
        <div
          *ngIf="currentPasswordInput.invalid && currentPasswordInput.touched && !successMessage"
          class="error-text"
        >
          Current password is required
        </div>
      </div>

      <div class="form-group">
        <label for="newPassword">New Password:</label>
        <input
          type="password"
          id="newPassword"
          name="newPassword"
          [(ngModel)]="newPassword"
          required
          minlength="6"
          class="form-control"
          #newPasswordInput="ngModel"
        />
        <div
          *ngIf="newPasswordInput.invalid && newPasswordInput.touched && !successMessage"
          class="error-text"
        >
          New password must be at least 6 characters long
        </div>
      </div>

      <div class="form-group">
        <label for="confirmPassword">Confirm New Password:</label>
        <input
          type="password"
          id="confirmPassword"
          name="confirmPassword"
          [(ngModel)]="confirmPassword"
          required
          class="form-control"
          #confirmPasswordInput="ngModel"
        />
        <div
          *ngIf="confirmPasswordInput.invalid && confirmPasswordInput.touched && !successMessage"
          class="error-text"
        >
          Please confirm your new password
        </div>
      </div>

      <div *ngIf="errorMessage" class="error-message">
        {{ errorMessage }}
      </div>

      <div *ngIf="successMessage" class="success-message">
        {{ successMessage }}
      </div>

      <div class="form-actions">
        <button
          type="submit"
          [disabled]="changePasswordForm.invalid || isLoading"
          class="btn btn-primary"
        >
          <span *ngIf="isLoading">Changing Password...</span>
          <span *ngIf="!isLoading">Change Password</span>
        </button>

        <button
          type="button"
          (click)="onCancel()"
          class="btn btn-secondary"
        >
          Cancel
        </button>
      </div>
    </form>
  </div>
</div>
